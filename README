A DB migration program focused on safety
and supporting zero down time deployments.


== GOALS ==
Separate DB changes into the 3 phases of Zero Downtime Deployment:
* Expansion: add new schema elements
* Rollout (not pygrate): deploy new application code
* Cleanup:
	* hide old schema elements to simulate dropping
	* permanently drop old schema elements

Easily rollback added and hidden elements

Segregate DB changes by "release", to limit how much can be rolled back


== USAGE ==
pygrate <operation> <release>

<operation> is one of:
* add
* hide
* drop
* rollback_add
* rollback_hide

<release> references the group of files to execute


== PYGRATIONS ==
each logical database change is implemented in a subclass of the
Pygration class.  the pygration subclass has a method for each of the
high level operations listed above.  that method will
get called by pygrate when it's run.

Sample Pygration:
class RenameUserIDColumn(pygrate.Pygration):
    """Rename the userid column to be username."""

    def add(self,db):
        """Add the username column and copy userid values to it."""
        db.add_column( "user", String( "username") )
        db.execute_sql( "update user set username=userid;" )

    def drop(self,db):
        """Drop the userid column before completely dropping it."""
        db.drop_column( "user.userid" )


== SUPPORTED DB OPERATIONS ==
* add/drop table
* raw sql
(not yet supported directly)
* add/drop column
* add/drop stored procedure
* add/drop view
* add/drop index
* add/drop constraint
* grant/revoke

